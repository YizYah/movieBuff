"use strict";function cov_1s52dh0clo(){var path="/home/yisroel/projects/movieBuff/filmInfo.ts";var hash="826b32a2fd5fc0be45eea74f2243acf108065b4f";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/yisroel/projects/movieBuff/filmInfo.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:26}},"2":{start:{line:4,column:20},end:{line:4,column:42}},"3":{start:{line:6,column:22},end:{line:6,column:46}},"4":{start:{line:7,column:4},end:{line:22,column:5}},"5":{start:{line:8,column:23},end:{line:10,column:10}},"6":{start:{line:11,column:32},end:{line:11,column:69}},"7":{start:{line:12,column:8},end:{line:15,column:10}},"8":{start:{line:18,column:8},end:{line:20,column:9}},"9":{start:{line:19,column:12},end:{line:19,column:31}},"10":{start:{line:21,column:8},end:{line:21,column:61}},"11":{start:{line:23,column:4},end:{line:23,column:23}},"12":{start:{line:25,column:0},end:{line:25,column:28}}},fnMap:{"0":{name:"filmInfo",decl:{start:{line:5,column:15},end:{line:5,column:23}},loc:{start:{line:5,column:40},end:{line:24,column:1}},line:5}},branchMap:{"0":{loc:{start:{line:18,column:8},end:{line:20,column:9}},type:"if",locations:[{start:{line:18,column:8},end:{line:20,column:9}},{start:{line:18,column:8},end:{line:20,column:9}}],line:18}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},f:{"0":0},b:{"0":[0,0]},inputSourceMap:{version:3,file:"/home/yisroel/projects/movieBuff/filmInfo.ts",sources:["/home/yisroel/projects/movieBuff/filmInfo.ts"],names:[],mappings:";;;AACA,2CAAsC;AAG/B,KAAK,UAAU,QAAQ,CAAC,KAAa,EAAE,OAAgB;IAE1D,IAAI,WAAW,GAAQ,EAAC,OAAO,EAAC,EAAE,EAAE,IAAI,EAAE,CAAC,EAAC,CAAA;IAC5C,IAAI;QACA,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,GAAG,CAC5B,qBAAS,EACT;YACI,KAAK;SACR,CAAC,CAAA;QAEN,MAAM,eAAe,GACjB,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,UAAU,CAAA;QAEzC,WAAW,GAAG;YACV,OAAO,EAAE,eAAe,CAAC,OAAO;YAChC,IAAI,EAAE,eAAe,CAAC,QAAQ,CAAC,GAAG;SACrC,CAAA;KAEJ;IAAC,OAAO,KAAK,EAAE;QACZ,IAAI,KAAK,CAAC,IAAI,KAAG,WAAW,EAAE;YAC1B,OAAO,WAAW,CAAA;SACrB;QACD,MAAM,IAAI,KAAK,CAAC,4BAA4B,KAAK,EAAE,CAAC,CAAA;KACvD;IAED,OAAO,WAAW,CAAA;AACtB,CAAC;AA1BD,4BA0BC",sourcesContent:["import {Session} from \"neo4j-driver\";\nimport {filmQuery} from \"./filmQuery\";\nimport {FilmFacts} from \"./FilmFacts\";\n\nexport async function filmInfo(title: string, session: Session):\n    Promise<FilmFacts> {\n    let returnValue: any = {tagline:'', year: 0}\n    try {\n        const result = await session.run(\n            filmQuery,\n            {\n                title,\n            })\n\n        const movieProperties =\n            result.records[0].get('m').properties\n\n        returnValue = {\n            tagline: movieProperties.tagline,\n            year: movieProperties.released.low\n        }\n\n    } catch (error) {\n        if (error.name==='TypeError') {\n            return returnValue\n        }\n        throw new Error(`error getting film info: ${error}`)\n    }\n\n    return returnValue\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"826b32a2fd5fc0be45eea74f2243acf108065b4f"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1s52dh0clo=function(){return actualCoverage;};}return actualCoverage;}cov_1s52dh0clo();cov_1s52dh0clo().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_1s52dh0clo().s[1]++;exports.filmInfo=void 0;const filmQuery_1=(cov_1s52dh0clo().s[2]++,require("./filmQuery"));async function filmInfo(title,session){cov_1s52dh0clo().f[0]++;let returnValue=(cov_1s52dh0clo().s[3]++,{tagline:'',year:0});cov_1s52dh0clo().s[4]++;try{const result=(cov_1s52dh0clo().s[5]++,await session.run(filmQuery_1.filmQuery,{title}));const movieProperties=(cov_1s52dh0clo().s[6]++,result.records[0].get('m').properties);cov_1s52dh0clo().s[7]++;returnValue={tagline:movieProperties.tagline,year:movieProperties.released.low};}catch(error){cov_1s52dh0clo().s[8]++;if(error.name==='TypeError'){cov_1s52dh0clo().b[0][0]++;cov_1s52dh0clo().s[9]++;return returnValue;}else{cov_1s52dh0clo().b[0][1]++;}cov_1s52dh0clo().s[10]++;throw new Error(`error getting film info: ${error}`);}cov_1s52dh0clo().s[11]++;return returnValue;}cov_1s52dh0clo().s[12]++;exports.filmInfo=filmInfo;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUveWlzcm9lbC9wcm9qZWN0cy9tb3ZpZUJ1ZmYvZmlsbUluZm8udHMiLCJzb3VyY2VzIjpbIi9ob21lL3lpc3JvZWwvcHJvamVjdHMvbW92aWVCdWZmL2ZpbG1JbmZvLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLDJDQUFzQztBQUcvQixLQUFLLFVBQVUsUUFBUSxDQUFDLEtBQWEsRUFBRSxPQUFnQjtJQUUxRCxJQUFJLFdBQVcsR0FBUSxFQUFDLE9BQU8sRUFBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBQyxDQUFBO0lBQzVDLElBQUk7UUFDQSxNQUFNLE1BQU0sR0FBRyxNQUFNLE9BQU8sQ0FBQyxHQUFHLENBQzVCLHFCQUFTLEVBQ1Q7WUFDSSxLQUFLO1NBQ1IsQ0FBQyxDQUFBO1FBRU4sTUFBTSxlQUFlLEdBQ2pCLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFVBQVUsQ0FBQTtRQUV6QyxXQUFXLEdBQUc7WUFDVixPQUFPLEVBQUUsZUFBZSxDQUFDLE9BQU87WUFDaEMsSUFBSSxFQUFFLGVBQWUsQ0FBQyxRQUFRLENBQUMsR0FBRztTQUNyQyxDQUFBO0tBRUo7SUFBQyxPQUFPLEtBQUssRUFBRTtRQUNaLElBQUksS0FBSyxDQUFDLElBQUksS0FBRyxXQUFXLEVBQUU7WUFDMUIsT0FBTyxXQUFXLENBQUE7U0FDckI7UUFDRCxNQUFNLElBQUksS0FBSyxDQUFDLDRCQUE0QixLQUFLLEVBQUUsQ0FBQyxDQUFBO0tBQ3ZEO0lBRUQsT0FBTyxXQUFXLENBQUE7QUFDdEIsQ0FBQztBQTFCRCw0QkEwQkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1Nlc3Npb259IGZyb20gXCJuZW80ai1kcml2ZXJcIjtcbmltcG9ydCB7ZmlsbVF1ZXJ5fSBmcm9tIFwiLi9maWxtUXVlcnlcIjtcbmltcG9ydCB7RmlsbUZhY3RzfSBmcm9tIFwiLi9GaWxtRmFjdHNcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbG1JbmZvKHRpdGxlOiBzdHJpbmcsIHNlc3Npb246IFNlc3Npb24pOlxuICAgIFByb21pc2U8RmlsbUZhY3RzPiB7XG4gICAgbGV0IHJldHVyblZhbHVlOiBhbnkgPSB7dGFnbGluZTonJywgeWVhcjogMH1cbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXNzaW9uLnJ1bihcbiAgICAgICAgICAgIGZpbG1RdWVyeSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aXRsZSxcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgY29uc3QgbW92aWVQcm9wZXJ0aWVzID1cbiAgICAgICAgICAgIHJlc3VsdC5yZWNvcmRzWzBdLmdldCgnbScpLnByb3BlcnRpZXNcblxuICAgICAgICByZXR1cm5WYWx1ZSA9IHtcbiAgICAgICAgICAgIHRhZ2xpbmU6IG1vdmllUHJvcGVydGllcy50YWdsaW5lLFxuICAgICAgICAgICAgeWVhcjogbW92aWVQcm9wZXJ0aWVzLnJlbGVhc2VkLmxvd1xuICAgICAgICB9XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoZXJyb3IubmFtZT09PSdUeXBlRXJyb3InKSB7XG4gICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWVcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGVycm9yIGdldHRpbmcgZmlsbSBpbmZvOiAke2Vycm9yfWApXG4gICAgfVxuXG4gICAgcmV0dXJuIHJldHVyblZhbHVlXG59XG4iXX0=
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3lpc3JvZWwvcHJvamVjdHMvbW92aWVCdWZmL2ZpbG1JbmZvLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJ1d0dBc0JLOzROQXJCTCxLQUFBLENBQUEsV0FBQSwwQkFBQSxPQUFBLENBQUEsYUFBQSxDQUFBLENBQUEsQ0FHTyxjQUFlLENBQUEsUUFBZixDQUF3QixLQUF4QixDQUF1QyxPQUF2QyxDQUF1RCx5QkFFMUQsR0FBSSxDQUFBLFdBQVcsMEJBQVEsQ0FBQyxPQUFPLENBQUMsRUFBVCxDQUFhLElBQUksQ0FBRSxDQUFuQixDQUFSLENBQWYsQ0FGMEQsd0JBRzFELEdBQUksQ0FDQSxLQUFNLENBQUEsTUFBTSwwQkFBRyxLQUFNLENBQUEsT0FBTyxDQUFDLEdBQVIsQ0FDakIsV0FBQSxDQUFBLFNBRGlCLENBRWpCLENBQ0ksS0FESixDQUZpQixDQUFULENBQVosQ0FNQSxLQUFNLENBQUEsZUFBZSwwQkFDakIsTUFBTSxDQUFDLE9BQVAsQ0FBZSxDQUFmLEVBQWtCLEdBQWxCLENBQXNCLEdBQXRCLEVBQTJCLFVBRFYsQ0FBckIsQ0FQQSx3QkFVQSxXQUFXLENBQUcsQ0FDVixPQUFPLENBQUUsZUFBZSxDQUFDLE9BRGYsQ0FFVixJQUFJLENBQUUsZUFBZSxDQUFDLFFBQWhCLENBQXlCLEdBRnJCLENBQWQsQ0FLSCxDQUFDLE1BQU8sS0FBUCxDQUFjLHlCQUNaLEdBQUksS0FBSyxDQUFDLElBQU4sR0FBYSxXQUFqQixDQUE4QixvREFDMUIsTUFBTyxDQUFBLFdBQVAsQ0FDSCxDQUZELGlDQURZLHlCQUlaLEtBQU0sSUFBSSxDQUFBLEtBQUosQ0FBVSw0QkFBNEIsS0FBSyxFQUEzQyxDQUFOLENBQ0gsQ0F2QnlELHlCQXlCMUQsTUFBTyxDQUFBLFdBQVAsQ0FDSCxDLHlCQTFCRCxPQUFBLENBQUEsUUFBQSxDQUFBLFFBQUEsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7U2Vzc2lvbn0gZnJvbSBcIm5lbzRqLWRyaXZlclwiO1xuaW1wb3J0IHtmaWxtUXVlcnl9IGZyb20gXCIuL2ZpbG1RdWVyeVwiO1xuaW1wb3J0IHtGaWxtRmFjdHN9IGZyb20gXCIuL0ZpbG1GYWN0c1wiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmlsbUluZm8odGl0bGU6IHN0cmluZywgc2Vzc2lvbjogU2Vzc2lvbik6XG4gICAgUHJvbWlzZTxGaWxtRmFjdHM+IHtcbiAgICBsZXQgcmV0dXJuVmFsdWU6IGFueSA9IHt0YWdsaW5lOicnLCB5ZWFyOiAwfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlc3Npb24ucnVuKFxuICAgICAgICAgICAgZmlsbVF1ZXJ5LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgICAgfSlcblxuICAgICAgICBjb25zdCBtb3ZpZVByb3BlcnRpZXMgPVxuICAgICAgICAgICAgcmVzdWx0LnJlY29yZHNbMF0uZ2V0KCdtJykucHJvcGVydGllc1xuXG4gICAgICAgIHJldHVyblZhbHVlID0ge1xuICAgICAgICAgICAgdGFnbGluZTogbW92aWVQcm9wZXJ0aWVzLnRhZ2xpbmUsXG4gICAgICAgICAgICB5ZWFyOiBtb3ZpZVByb3BlcnRpZXMucmVsZWFzZWQubG93XG4gICAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvci5uYW1lPT09J1R5cGVFcnJvcicpIHtcbiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZVxuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgZXJyb3IgZ2V0dGluZyBmaWxtIGluZm86ICR7ZXJyb3J9YClcbiAgICB9XG5cbiAgICByZXR1cm4gcmV0dXJuVmFsdWVcbn1cbiJdfQ==